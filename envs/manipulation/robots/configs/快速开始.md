# 机器人配置系统 - 快速开始

## 问题
之前的代码中，所有机器人都使用相同的配置，无法灵活指定不同的配置。

## 解决方案
现在可以通过运行参数来指定机器人配置了！

## 快速使用

### 1. 查看所有可用配置
```bash
python examples/imitation/run_openloong_with_config.py --list_configs
```

输出示例：
```
可用的机器人配置：
  1. openloong
  2. openloong_hand_fix_base
  3. openloong_gripper_2f85_fix_base
  4. openloong_gripper_2f85_mobile_base
  5. d12
  6. hand
  7. gripper_2f85
```

### 2. 使用默认配置（最简单）
```bash
python examples/imitation/run_openloong_sim.py \
    --agent_name openloong_hand_fix_base \
    --run_mode teleoperation
```
系统会自动根据机器人名称选择合适的配置。

### 3. 指定特定配置
```bash
python examples/imitation/run_openloong_with_config.py \
    --agent_name openloong_hand_fix_base \
    --robot_config openloong \
    --run_mode teleoperation
```

### 4. 多个机器人使用不同配置
```bash
python examples/imitation/run_openloong_with_config.py \
    --agent_name "robot1 robot2" \
    --robot_configs "robot1:openloong,robot2:d12" \
    --run_mode teleoperation
```

## 在 Python 代码中使用

```python
from envs.manipulation.robots.configs.robot_config_registry import (
    get_robot_config,
    list_available_configs
)

# 列出所有配置
print(list_available_configs())

# 获取配置（自动推断）
config = get_robot_config("openloong_hand_fix_base")

# 获取配置（显式指定）
config = get_robot_config("my_robot", config_name="openloong")
```

## 添加新配置

1. 在 `envs/manipulation/robots/configs/` 目录创建新文件：`my_robot_config.py`

2. 定义配置：
```python
my_robot_config = {
    "robot_type": "dual_arm",
    "base": {
        "base_body_name": "base_link",
        "base_joint_name": "base_joint",
        "dummy_joint_name": "dummy_joint",
    },
    "right_arm": {
        "joint_names": ["joint1", "joint2", ...],
        "neutral_joint_values": [0.0, 0.0, ...],
        "motor_names": ["motor1", "motor2", ...],
        "position_names": ["pos1", "pos2", ...],
        "ee_center_site_name": "ee_center_r",
    },
    "left_arm": {
        "joint_names": ["joint1", "joint2", ...],
        "neutral_joint_values": [0.0, 0.0, ...],
        "motor_names": ["motor1", "motor2", ...],
        "position_names": ["pos1", "pos2", ...],
        "ee_center_site_name": "ee_center_l",
    },
}
```

3. 使用新配置：
```bash
python examples/imitation/run_openloong_with_config.py \
    --agent_name my_robot \
    --robot_config my_robot
```

## 测试配置系统

```bash
cd /home/orcash/OrcaGym/OrcaGym
python envs/manipulation/robots/configs/test_config_registry.py
```

应该看到所有测试通过：
```
✓ 测试1: 列出所有可用配置 - 通过
✓ 测试2: 通过名称获取配置 - 通过
✓ 测试3: 自动推断配置 - 通过
✓ 测试4: 无效配置处理 - 通过
✓ 测试5: 配置内容完整性 - 通过
```

## 常见问题

### Q: 如何知道我的机器人应该使用哪个配置？
A: 使用 `--list_configs` 查看所有配置，或者不指定配置让系统自动推断。

### Q: 可以为不同机器人使用不同配置吗？
A: 可以！使用 `--robot_configs "robot1:config1,robot2:config2"` 参数。

### Q: 旧的脚本还能用吗？
A: 能！如果不指定配置，系统会自动根据机器人名称推断，行为和之前一样。

### Q: 如何添加新配置？
A: 在 `envs/manipulation/robots/configs/` 目录创建 `xxx_config.py` 文件，定义 `xxx_config` 字典即可。

## 更多信息

详细文档请参考：
- [完整使用指南](README.md)
- [修改说明](CHANGES.md)
- [测试脚本](test_config_registry.py)

