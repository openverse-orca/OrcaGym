# 左右移动配置详细对比

## 📊 当前配置分析（已修复）

### 当前Lite3_rl实现（修复后）

| 按键 | 代码 | 原始速度值 | 缩放后速度 | 归一化后 | 说明 |
|------|------|-----------|-----------|---------|------|
| **A键（左）** | `lin_vel[1] = left_speed[1]` | 0.3 m/s | 0.3 m/s | **1.0** | 无缩放 |
| **D键（右）** | `lin_vel[1] = left_speed[0]` | -0.3 m/s | -0.3 m/s | **-1.0** | 无缩放（已修复） |

**状态**：
- ✅ A和D的速度**完全对称**：A是1.0，D是-1.0
- ✅ A键和D键都没有应用额外的速度缩放
- ✅ 归一化后的值完全对称

### legged_gym参考实现

| 按键 | 代码 | 原始速度值 | 归一化后 | 说明 |
|------|------|-----------|---------|------|
| **Q键（左）** | `lin_vel[1] = left_speed[0]` | -0.3 m/s | **-1.0** | 无缩放 |
| **E键（右）** | `lin_vel[1] = left_speed[1]` | 0.3 m/s | **1.0** | 无缩放 |

**特点**：
- ✅ Q和E的速度**对称**：Q是-1.0，E是1.0
- ✅ 都没有应用额外的速度缩放
- ✅ 归一化后的值完全对称

---

## 🔍 详细对比

### 配置值对比

| 项目 | left_speed配置 | A/Q键（左） | D/E键（右） | 对称性 |
|------|---------------|------------|------------|--------|
| **legged_gym** | [-0.3, 0.3] | [0] = -0.3 → -1.0 | [1] = 0.3 → 1.0 | ✅ 对称 |
| **Lite3_rl当前（修复后）** | [-0.3, 0.3] | [1] = 0.3 → 1.0 | [0] = -0.3 → -1.0 | ✅ 对称 |

### 归一化计算对比

**legged_gym**：
- Q键（左）：-0.3 / 0.3 = **-1.0** → 观测中 = -1.0 × 0.8 = **-0.8**
- E键（右）：0.3 / 0.3 = **1.0** → 观测中 = 1.0 × 0.8 = **0.8**

**Lite3_rl当前（修复后）**：
- A键（左）：0.3 / 0.3 = **1.0** → 观测中 = 1.0 × 0.8 = **0.8**
- D键（右）：-0.3 / 0.3 = **-1.0** → 观测中 = -1.0 × 0.8 = **-0.8**

---

## ✅ 修复状态

### 1. 速度对称性
- ✅ A键：归一化后 = 1.0（最大值）
- ✅ D键：归一化后 = -1.0（最大值，对称）

### 2. 缩放一致性
- ✅ A键：没有应用速度缩放
- ✅ D键：没有应用速度缩放（已移除）

### 3. 策略响应
- ✅ 左右移动速度完全对称，策略应该响应一致
- ⚠️ 如果D键仍然滑动，可能是策略对负值命令的训练不足（策略本身的问题）

---

## ✅ 已实施的修复

### 修复方案：移除D键的速度缩放，使其与A键对称

**当前代码**：
```python
if key_status["A"] == 1: 
    lin_vel[1] = self.player_agent_lin_vel_y[self.terrain_type][1]  # 0.3 m/s，左移
if key_status["D"] == 1: 
    lin_vel[1] = self.player_agent_lin_vel_y[self.terrain_type][0]  # -0.3 m/s，右移（已移除缩放）
```

**结果**：
- ✅ A键：0.3 → 归一化后 = 1.0
- ✅ D键：-0.3 → 归一化后 = -1.0
- ✅ 完全对称

---

## 📝 原项目配置（参考）

根据legged_gym的实现，原项目应该是：
- **Q键（左）**：使用 `left_speed[0]` = -0.3 m/s
- **E键（右）**：使用 `left_speed[1]` = 0.3 m/s
- **都没有额外的速度缩放**
- **完全对称**

---

## 🎯 修复总结

**已实施修复**：移除D键的速度缩放，使其与A键完全对称

**修复效果**：
1. ✅ 左右移动速度一致（±0.3 m/s）
2. ✅ 归一化后的值对称（±1.0）
3. ✅ 策略响应应该更一致

**注意事项**：
- 如果D键仍然滑动，可能是策略对负值命令的训练不足，这是策略本身的问题，而不是配置问题
- 当前配置已与原项目（legged_gym）保持一致

---

**文档版本**: v2.0  
**最后更新**: 2024  
**状态**: ✅ 已修复


